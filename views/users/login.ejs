<% var fullWidth = true; %>
<% var pageClass = "full-bg"; %>
<% layout('layouts/boilerplate') %>

<div class="d-flex justify-content-center align-items-center min-vh-100 bg-gradient">
  <div class="card shadow-lg border-0 rounded-4 p-4" style="max-width: 400px; width: 100%;">
    <div class="text-center mb-4">
      <h3 class="fw-bold text-dark">Welcome Back ðŸ‘‹</h3>
      <p class="text-muted small">Login to continue your journey</p>
    </div>

    <% if (error && error.length > 0) { %>
      <div class="alert alert-danger alert-dismissible fade show text-center" role="alert">
        <i class="bi bi-exclamation-triangle-fill me-2"></i>
        <%= error %>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
    <% } %>

    <form action="/login" method="POST" class="needs-validation" novalidate>

      <!-- Hidden login type field -->
      <input type="hidden" name="loginType" value="<%= loginType %>">
      
      <!-- Username Field -->
      <div class="form-floating mb-4 position-relative input-container">
        <input
          type="text"
          id="username"
          name="username"
          class="form-control stylish-input"
          placeholder="Enter your username"
          required
        />
        <label for="username">Username</label>
        <div class="input-icon">
          <i class="bi bi-person-fill"></i>
        </div>
      </div>

      <!-- Password Field -->
      <div class="form-floating mb-4 position-relative input-container">
        <input
          type="password"
          id="password"
          name="password"
          class="form-control stylish-input"
          placeholder="Enter your password"
          required
        />
        <label for="password">Password</label>
        <div class="input-icon">
          <i class="bi bi-lock-fill"></i>
        </div>
      </div>

      <button type="submit" class="btn btn-dark w-100 py-2 fw-semibold rounded-3 shadow-sm login-btn">
        <i class="bi bi-box-arrow-in-right me-2"></i>Login
      </button>

      <div class="text-center mt-4 small text-muted">
        Donâ€™t have an account?
        <a href="/signup" class="text-decoration-none fw-semibold text-primary">Sign up</a>
      </div>
    </form>
  </div>
</div>

<style>
  /* Background gradient */
  .bg-gradient {
    background: linear-gradient(135deg, #f8f9fa 0%, #dfe9f3 100%);
  }

  /* Card hover animation */
  .card {
    background: #fff;
    transition: 0.4s ease;
  }
  .card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
  }

  /* Input container styling */
  .input-container {
    position: relative;
  }

  .input-icon {
    position: absolute;
    top: 50%;
    right: 1rem;
    transform: translateY(-50%);
    color: #adb5bd;
    font-size: 1.2rem;
    transition: color 0.3s ease;
  }

  /* Floating label + animation */
  .form-floating label {
    color: #6c757d;
    transition: all 0.3s ease;
  }

  .stylish-input:focus ~ label,
  .stylish-input:not(:placeholder-shown) ~ label {
    color: #0d6efd;
    transform: translateY(-1.2rem);
    font-size: 0.85rem;
  }

  /* Stylish input box */
  .stylish-input {
    border: 2px solid #e9ecef;
    border-radius: 12px;
    background-color: #f8f9fa;
    box-shadow: inset 0 0 0 transparent;
    transition: all 0.3s ease;
  }

  .stylish-input:focus {
    border-color: #0d6efd;
    box-shadow: 0 0 8px rgba(13, 110, 253, 0.4);
    background-color: #fff;
  }

  .stylish-input:focus + .input-icon i {
    color: #0d6efd;
  }

  /* Button hover animation */
  .login-btn {
    background: linear-gradient(90deg, #000000, #343a40);
    border: none;
    transition: all 0.3s ease-in-out;
  }
  .login-btn:hover {
    background: linear-gradient(90deg, #343a40, #000000);
    transform: translateY(-2px);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
  }
</style>
